<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: #101010;
            }
    
            #container {
                width: 100vw;
                height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
            }
    
            #viewport {
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                -ms-interpolation-mode: nearest-neighbor;
                height: min(100vh, 100vw);
                aspect-ratio: 1;
                width: auto;
                max-width: 100vw;
                border: 1px solid white;
            }
        </style>
    </head>

    <body>
        <div id="container">
            <canvas id="viewport"></canvas>
        </div>
    </body>
    
    <!-- LOAD BEARING IMPORT ORDER do not change the order of these script tags, for some reason it breaks -->
    <script src=" {{ url_for('static', filename="platform.js") }} "></script>
    <script src=" {{ url_for('static', filename="shape.js") }} "></script>
    <script src=" {{ url_for('static', filename="library.js") }} "></script>
    <script src=" {{ url_for('static', filename="text.js") }} "></script>
    <script src=" {{ url_for('static', filename="sequence.js") }} "></script>
    <script src=" {{ url_for('static', filename="program/main.js") }}"></script>
    <script>
        initCanvas();
        generateText();
        programStart();

        let lastTime = 0;
        function outerMain(timestamp) {
            let deltaT = timestamp - lastTime;
            
            if (shouldRenderFrame(timestamp)) {
                lastTime = timestamp;
                step(deltaT);
                programUpdate(deltaT);
            }

            requestAnimationFrame(outerMain);
        }

        outerMain(performance.now());
    </script>
</html>
